<!DOCTYPE html>
<html lang="en">

  <!-- View -->
  <headReplace metal:use-macro="/templates/header.xhtml/meta_head">
  </headReplace>

  <body>

    <navReplace metal:use-macro="./templates/nav.xhtml/nav_bar">
    </navReplace>
  
   
    <section class="divider_01" >
    <div class="container">
        <div class="row">
            <div class="ten columns">
                <h2>SHOPPING CART</h2>
            </div>
            <div class="two columns">
                <button id="startCart" class="add_button">START CART</button>
            </div>
        </div>
        
        <div class="row">

            <table class="menu_simple">
                <tr>
                    <th style="width: 10%"></th>
                    <th style="width: 15%">Product ID</th>
                    <th style="width: 50%">Product Name</th> 
                    <th style="width: 20%">Quantity</th>
                    <th style="width: 10%">Price</th> 
                </tr>
              
                <bodyReplace metal:use-macro="./templates/cart.xhtml/cart_product_1">
                </bodyReplace>
              
                <bodyReplace metal:use-macro="./templates/cart.xhtml/cart_product_1">
                </bodyReplace>
              
            </table>

        
        </div>
      
      
      <div class="row">
          <table class="menu_simple">
            <tr>
                <th style="width: 10%"></th>
                <th style="width: 15%"></th>
                <th style="width: 50%"></th> 
                <th style="width: 20%"></th>
                <th style="width: 10%">Total</th> 
            </tr>
            <td class="total_td"></td>
            <td class="total_td"></td>
            <td class="total_td"></td>
            <td class="total_td"></td>
              
            <!-- TOTAL MUST BE CHANGED THROUGH PHP-->
            <td class="total_td">$200.00</td>
          </table>
      </div> 

        
                <div class="row">
                    <div class="two columns">
                        <button class="remove_button">CANCEL</button>
                    </div>
                    
                    <div class="two columns">
                        <button class="add_button">CHECKOUT</button>
                    </div>
                </div>
        
    </div>
</section>
    

    <footerReplace metal:use-macro="./templates/footer.xhtml/footer_bar">
    </footerReplace>  
      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="./js/main.js"></script>
      <script>
          $(document).ready(function(){
              
            Storage.prototype.setObject = function(key, value) {
                this.setItem(key, JSON.stringify(value));
            }

            Storage.prototype.getObject = function(key) {
                var value = this.getItem(key);
                return value && JSON.parse(value);
            }
         
            $("#startCart").click(function() {
                console.log("Start cart.");
                $.ajax({
                    url: "./shopping_cart.php",
                    type: "POST",
                    dataType: 'json',
                    data: {action: "startcart"},
                    success: function(returnedData) {
                        console.log("cart start response: ", returnedData);

                        // WEB STORAGE - SESSION STORAGE
                        //var sessionID = returnedData['s_id'];
                        sessionStorage.setObject('autosave', {items: []});


                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        console.log(jqXHR.statusText, textStatus);
                    }
                });
            });
      
       });
      </script>
  </body>
</html>
